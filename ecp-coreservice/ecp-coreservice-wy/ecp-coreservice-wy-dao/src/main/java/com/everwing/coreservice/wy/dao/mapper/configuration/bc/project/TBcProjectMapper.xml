<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.everwing.coreservice.wy.dao.mapper.configuration.bc.project.TBcProjectMapper" >    <resultMap type="TBcProject" id="BaseResultMap">		<result property="id" 			column="id" 			jdbcType="VARCHAR"/>		<result property="projectId" 	column="project_id"		jdbcType="VARCHAR"/>		<result property="projectName" 	column="project_name"	jdbcType="VARCHAR"/>		<result property="wyType" 		column="wy_type"		jdbcType="TINYINT"/>		<result property="btType" 		column="bt_type"		jdbcType="TINYINT"/>		<result property="waterType" 	column="water_type"		jdbcType="TINYINT"/>		<result property="electType" 	column="elect_type"		jdbcType="TINYINT"/>		<result property="wyStatus" 	column="wy_status"		jdbcType="TINYINT"/>		<result property="btStatus" 	column="bt_status"		jdbcType="TINYINT"/>		<result property="waterStatus" 	column="water_status"	jdbcType="TINYINT"/>		<result property="electStatus" 	column="elect_status"	jdbcType="TINYINT"/>		<result property="status" 		column="status"			jdbcType="TINYINT"/>		<result property="shopNum" 		column="shop_num"		jdbcType="VARCHAR"/>		<result property="unionPrivateZone" column="union_private_zone" jdbcType="VARCHAR"/>		<result property="enterpriseNo" column="enterprise_no"	jdbcType="VARCHAR"/>		<result property="unionCount" 	column="union_count"	jdbcType="INTEGER"/>		<result property="jrlCount" 	column="jrl_count"		jdbcType="INTEGER"/>		<result property="createId" 	column="create_id"		jdbcType="VARCHAR"/>		<result property="createTime" 	column="create_time"	jdbcType="TIMESTAMP"/>		<result property="modifyId" 	column="modify_id"		jdbcType="VARCHAR"/>		<result property="modifyTime" 	column="modify_time"	jdbcType="TIMESTAMP"/>		<result property="jrlWaitBankNo"	column="jrl_wait_bank_no"	jdbcType="VARCHAR"/>	</resultMap>		<sql id="updateSql">		<set>			<if test="null != status"> status = #{status},  </if>			<if test="null != wyType"> wy_type = #{wyType}, </if>			<if test="null != btType"> bt_type = #{btType}, </if>			<if test="null != waterType"> water_type = #{waterType}, </if>			<if test="null != electType"> elect_type = #{electType}, </if>			<if test="null != wyStatus"> wy_status = #{wyStatus}, </if>			<if test="null != btStatus"> bt_status = #{btStatus}, </if>			<if test="null != waterStatus"> water_status = #{waterStatus}, </if>			<if test="null != electStatus"> elect_status = #{electStatus}, </if>			<if test="null != unionCount"> union_count = #{unionCount}, </if>			<if test="null != shopNum"> shop_num = #{shopNum}, </if>			<if test="null != unionPrivateZone"> union_private_zone = #{unionPrivateZone}, </if>			<if test="null != enterpriseNo"> enterprise_no = #{enterpriseNo}, </if>			<if test="null != jrlWaitBankNo"> jrl_wait_bank_no = #{jrlWaitBankNo}, </if>			<if test="null != jrlCount"> jrl_count = #{jrlCount}, </if>			<if test="null != modifyId"> modify_id = #{modifyId}, </if>			modify_time = sysdate()		</set>	</sql>		<update id="update" parameterType="TBcProject">		update t_bc_project 		<include refid="updateSql"/>		where id = #{id}	</update>		<select id="findById" parameterType="String" resultMap="BaseResultMap">		select * from t_bc_project where project_id = #{id}	</select>		<select id="listPage" parameterType="TBcProject" resultMap="BaseResultMap">		select * from t_bc_project		where 1 = 1 		<if test="null != searchCode">			and				( 						project_name like CONCAT('%',#{searchCode},'%')										or												shop_num like CONCAT('%',#{searchCode},'%')								)		</if>	</select>		<insert id="insert" parameterType="TBcProject">		insert into t_bc_project		(			id,			project_id,			project_name,			wy_type,			bt_type,			water_type,			elect_type,			wy_status,			bt_status,			water_status,			elect_status,			status,			shop_num,			union_private_zone,			union_count,			jrl_count,			create_id,			create_time,			modify_id,			modify_time		)		values		(			<if test="null == id">				UPPER(UUID()),			</if>			<if test="null != id">				#{id},			</if>			#{projectId},			#{projectName},			#{wyType},			#{btType},			#{waterType},			#{electType},			#{wyStatus},			#{btStatus},			#{waterStatus},			#{electStatus},			#{status},			#{shopNum},			#{unionPrivateZone},			#{unionCount},			#{jrlCount},			#{createId},			#{createTime},			#{modifyId},			#{modifyTime}		)	</insert>	<!-- 拿到托收项目信息后，查询本次需要进行生成托收文件的计费总账单id -->	 <select id="getChargeTotalIds" parameterType = "java.lang.String" resultType = "java.lang.String">		  SELECT		   id		  FROM		   t_bs_charge_bill_total		  WHERE		   DATE_FORMAT(billing_time, '%Y-%m') = DATE_FORMAT(NOW(), '%Y-%m')		  AND project_id = #{projectId}	 </select>	<select id="findByProjectId" parameterType="String" resultMap="BaseResultMap">		select * from t_bc_project where project_id = #{projectId}	</select>	<update id="updateUnionCountByProjectId" parameterType="String">		UPDATE t_bc_project SET union_count=union_count+1 WHERE project_id=#{projectId}	</update>	<update id="updateJrlCountByProjectId" parameterType="String">		UPDATE t_bc_project SET jrl_count=jrl_count+1 WHERE project_id=#{projectId}	</update>		<delete id="deleteByCode">		delete from t_bc_project where project_id = #{projectId}	</delete></mapper>